{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst form = document.querySelector('.feedback-form');\nconst input = document.querySelector('.feedback-form input');\nconst textarea = document.querySelector('.feedback-form textarea');\n\nconst KEY_FORM = 'feedback-form-state';\nconst UPDATE_TIME = 500;\n\nconst defaultData = { email: '', message: '' };\nlet data = JSON.parse(window.localStorage.getItem(KEY_FORM)) ?? defaultData;\n\nform.addEventListener('submit', handlerSubmit);\ninput.addEventListener('input', handlerEmail);\ntextarea.addEventListener('input', handlerMessage);\n\nconst throttleSaveToLS = throttle(saveToLocalStorage, UPDATE_TIME);\n\nfunction saveToLocalStorage(key, value) {\n  if (key) {\n    data[key] = value;\n    window.localStorage.setItem(KEY_FORM, JSON.stringify(data));\n  } else window.localStorage.removeItem(KEY_FORM);\n}\n\nfunction handlerEmail(evt) {\n  throttleSaveToLS('email', evt.target.value);\n}\nfunction handlerMessage(evt) {\n  throttleSaveToLS('message', evt.target.value);\n}\n\nfunction handlerSubmit(evt) {\n  evt.preventDefault();\n  console.log(data);\n  resetForm(evt);\n}\n\nfunction resetForm() {\n  form.reset();\n  saveToLocalStorage('');\n  data = defaultData;\n}\n\nfunction getPrevData() {\n  const prevData = JSON.parse(window.localStorage.getItem(KEY_FORM));\n  if (!prevData) return;\n  input.value = prevData.email;\n  textarea.value = prevData.message;\n}\n\ngetPrevData();\n"],"names":["form","input","textarea","KEY_FORM","UPDATE_TIME","defaultData","data","handlerSubmit","handlerEmail","handlerMessage","throttleSaveToLS","throttle","saveToLocalStorage","key","value","evt","resetForm","getPrevData","prevData"],"mappings":"wIAEA,MAAMA,EAAO,SAAS,cAAc,gBAAgB,EAC9CC,EAAQ,SAAS,cAAc,sBAAsB,EACrDC,EAAW,SAAS,cAAc,yBAAyB,EAE3DC,EAAW,sBACXC,EAAc,IAEdC,EAAc,CAAE,MAAO,GAAI,QAAS,EAAE,EAC5C,IAAIC,EAAO,KAAK,MAAM,OAAO,aAAa,QAAQH,CAAQ,CAAC,GAAKE,EAEhEL,EAAK,iBAAiB,SAAUO,CAAa,EAC7CN,EAAM,iBAAiB,QAASO,CAAY,EAC5CN,EAAS,iBAAiB,QAASO,CAAc,EAEjD,MAAMC,EAAmBC,EAASC,EAAoBR,CAAW,EAEjE,SAASQ,EAAmBC,EAAKC,EAAO,CAClCD,GACFP,EAAKO,GAAOC,EACZ,OAAO,aAAa,QAAQX,EAAU,KAAK,UAAUG,CAAI,CAAC,GACrD,OAAO,aAAa,WAAWH,CAAQ,CAChD,CAEA,SAASK,EAAaO,EAAK,CACzBL,EAAiB,QAASK,EAAI,OAAO,KAAK,CAC5C,CACA,SAASN,EAAeM,EAAK,CAC3BL,EAAiB,UAAWK,EAAI,OAAO,KAAK,CAC9C,CAEA,SAASR,EAAcQ,EAAK,CAC1BA,EAAI,eAAc,EAClB,QAAQ,IAAIT,CAAI,EAChBU,EAAa,CACf,CAEA,SAASA,GAAY,CACnBhB,EAAK,MAAK,EACVY,EAAmB,EAAE,EACrBN,EAAOD,CACT,CAEA,SAASY,GAAc,CACrB,MAAMC,EAAW,KAAK,MAAM,OAAO,aAAa,QAAQf,CAAQ,CAAC,EAC5De,IACLjB,EAAM,MAAQiB,EAAS,MACvBhB,EAAS,MAAQgB,EAAS,QAC5B,CAEAD,EAAa"}